version: '3.8'

services:
  bot:
    build: .
    container_name: glj-teams-bot
    ports:
      - "3978:3978"
    env_file:
      - .env
    depends_on:
      - redis
    restart: unless-stopped

    # ğŸ”½ è¨¼æ˜æ›¸ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆ
    volumes:
      - ./certs:/home/site/certs:ro

    # ğŸ”½ ç’°å¢ƒå¤‰æ•°ã®æ˜ç¤ºè¨­å®š
    environment:
      - MicrosoftAppCertificateFile=/home/site/certs/bot-certificate.pfx
      - KEY_VAULT_NAME=kv-kojimori547820435851 # â† ã‚ãªãŸã® Key Vault åã«ç½®ãæ›ãˆã¦ãã ã•ã„

  redis:
    image: redis:7.2
    container_name: redis
    ports:
      - "6379:6379"
    restart: unless-stopped

